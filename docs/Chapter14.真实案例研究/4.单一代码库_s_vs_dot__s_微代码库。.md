# 单一代码库 vs. 微代码库。

哪个是最好的？为什么不同的公司选择不同的选项？![](../images/monorepo-microrepo.jpg)Monorepo 并不是什么新鲜事；Linux 和 Windows 都是使用 Monorepo 创建的。为了提高可扩展性和构建速度，谷歌开发了内部专用工具链，以加快扩展速度，并制定了严格的编码质量标准以保持一致性。亚马逊和 Netflix 是微服务理念的主要倡导者。这种方法自然地将服务代码分开存放在不同的代码库中。它能更快地扩展，但后期可能会导致治理痛点。在 Monorepo 中，每个服务都是一个文件夹，每个文件夹都有一个 BUILD 配置和 OWNERS 权限控制。每个服务成员都负责自己的文件夹。另一方面，在 Microrepo 中，每个服务都负责其存储库，通常为整个存储库设置构建配置和权限。在 Monorepo 中，无论您的业务如何，依赖项都在整个代码库中共享，因此当有版本升级时，每个代码库都会升级其版本。在 Microrepo 中，依赖关系在每个存储库内进行控制。企业根据自己的时间表选择何时升级版本。Monorepo 有一个标准的签入流程。Google 的代码审查流程以设定高标准而闻名，确保 Monorepo 的一致质量标准，无论业务如何。Microrepo 可以自行制定标准，也可以通过整合最佳实践来采用共享标准。它可以更快地为业务扩展，但代码质量可能会有所不同。谷歌工程师构建了 Bazel，Meta 构建了 Buck。还有其他开源工具可用，包括 Nx、Lerna 等。多年来，Microrepo 拥有更多支持的工具，包括 Maven 和 Gradle 用于 Java，NPM 用于 NodeJS，以及 CMake 用于 C/C++等。